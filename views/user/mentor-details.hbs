<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Leads</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
 <!-- Add necessary meta tags and links to CSS/JS files -->
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
  <!-- Bootstrap JS -->
  <!-- DataTables JS -->
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
   <style>


 @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@300&display=swap');
body {
    font-family: 'Montserrat', sans-serif;
    background-color: #f0f2f5;
    margin: 0;
    padding: 0;
    font-size: 14px;
}

.form-control{
    
    border:none;
    padding-left:32px;
}
.tt {
    margin-top: 20px;
    padding: 70px;
    border-radius: 10px;background-color: #f2f9f6; /* Very pale mint green */

}
.btn-primary{
    font-size: 10px;
    background-color: #007bff !important;
}
.btn-secondary{
    font-size: 10px;
    background-color: #160070 !important;
}
.table-responsive{
    margin-top: 15px;
}
.form-control:focus{
    
    border:none;
    box-shadow:none;
}

.green{
    
    color:green;
}
/* Button styles */
.btn-status {
    font-size: 10px; /* Smaller font size for buttons */
    padding: 4px 8px; /* Smaller padding for buttons */
    transition: background-color 0.3s ease;
}

.btn-not-paid {
    background-color: #e8172c; /* Red */
    color: #fff;
}

.btn-paid {
    background-color: #28a745; /* Green */
    color: #fff;
}

.btn-not-approved {
    background-color: #ffc107; /* Yellow */
    color: #000;
}

.btn-approved {
    background-color: #17a2b8; /* Teal */
    color: #fff;
}

.btn-not-done {
    background-color: #ffc107; /* Yellow */
    color: #000;
}

.btn-done {
    background-color: #28a745; /* Green */
    color: #fff;
}

.btn-status.active-paid {
    background-color: #28a745 !important; /* Green */
    color: #fff;
}

.btn-status.active-not-paid {
    background-color: #dc3545 !important; /* Red */
    color: #fff;
}

.btn-glass:hover{
color: #ffffff;
background-color: #1c008b !important;
}
.btn-status.active-not-approved {
    background-color: #ffc107 !important; /* Yellow */
    color: #000;
}
/* Container for table */
.table-wrapper {
    position: relative; /* To contain the sticky header */
    overflow: auto; /* Allows the table body to scroll */
    height: 430px; /* Set a height for the scrolling area */
}

/* Ensure the table takes the full width of its container */
.table {
    width: 100%;
    height: 500px !important;
    border-collapse: collapse;
    font-size: 10px; /* Smaller font size for table content */
    table-layout: fixed; /* Ensures fixed widths are respected */
}

/* Ensure the table header stays fixed at the top */
.table thead {
    position: sticky;
    top: 0;
    background-color: #fff; /* Solid background color for visibility */
    z-index: 2; /* Ensure it stays on top of other content */
}

/* Table header and cells styling */
.table thead th,
.table tbody td {
    text-align: left;
    padding: 6px; /* Reduced padding for a smaller appearance */
    border: 1px solid #dee2e6;
    font-size: 12px; /* Consistent smaller font size */
    width: 120px; /* Fixed width for consistency */
    font-family: Arial, Helvetica, sans-serif;
    overflow: hidden; /* Prevent overflow for fixed-width cells */
    text-overflow: ellipsis; /* Add ellipsis for overflowed text */
    white-space: nowrap; /* Prevent text wrapping */
}

.table thead th {
    background-color: #232f65;
    color: #ffffff;
}

.table tbody tr:hover {
    background-color: #d0e3ff; /* Hover color for rows */
}


/* Adjust other table-related styles if necessary */


.btn-status.active-approved {
    background-color: #17a2b8 !important; /* Teal */
    color: #fff;
}

.btn-status.active-not-done {
    background-color: #ffc107 !important; /* Yellow */
    color: #000;
}

.btn-status.active-done {
    background-color: #28a745 !important; /* Green */
    color: #fff;
}
/* DataTables styles */
.dataTables_wrapper .dataTables_filter {
    float: right;
    text-align: right;
    margin-bottom: 10px; /* Add margin below the search bar */
}

.dataTables_wrapper .dataTables_filter input {
    margin-left: 0.5em;
    display: inline-block;
    width: auto;
    margin-bottom: 10px; /* Add margin below the search bar */
        position: sticky !important;
}

.dataTables_wrapper .dataTables_length {
    float: left;
    margin-bottom: 10px; /* Add margin below the length dropdown */
}

.dataTables_wrapper .dataTables_info {
    float: left;
    margin-top: 10px; /* Add margin above the info text */
}

.dataTables_wrapper .dataTables_paginate {
    float: right;
    margin-top: 10px; /* Add margin above the pagination controls */

}



.image-stack {
    position: relative;
    display: flex;
}

.profile-img {
    border-radius: 50%;
    position: relative;
    z-index: 1;
    margin-left: -20px;
    transition: transform 0.3s, z-index 0.3s;
}

.profile-img:hover {
    transform: translateX(-20px);
    z-index: 10;
}

.image-stack .bg-success {
    position: absolute;
    bottom: 0;
    right: 0;
    border-radius: 50%;
    border: 2px solid white;
    padding: 1px;
}


    </style>
</head>

<body>
    <div class="container-xxl position-relative bg-white d-flex p-0" style="background-color: #232f65;">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Sidebar Start -->
        <div class="sidebar pe-4 pb-3" style="background-color: #232f65;">
            <nav class="navbar " style="background-color: #232f65;">
                <a href="index.html" class="navbar-brand mx-4 mb-3">
                    <h3 class="text-primary"> <img src="/images/indian-hub-logo-vert-white-e1662813826792.png" alt="Indian Edu Hub Logo" class="log"></h3>
                </a>
                <div class="d-flex align-items-center ms-4 mb-4" style="background-color: #232f65;">
                       <div class="position-relative">
                  <div class="image-stack">
  <img class="profile-img" src="/images/Screenshot 2024-07-26 180718.png" alt="" style="width: 40px; height: 40px;">
  <img class="profile-img" src="/images/WhatsApp Image 2024-07-26 at 18.04.35_0c595226.jpg" alt="" style="width: 40px; height: 40px;">
  <img class="profile-img" src="/images/Screenshot 2024-07-26 182331.png" alt="" style="width: 40px; height: 40px;">
  <img class="profile-img" src="/images/WhatsApp Image 2024-07-26 at 17.51.27_ac46e3bb.jpg" alt="" style="width: 40px; height: 40px;">
  <div class="bg-success rounded-circle border border-2 border-white position-absolute end-0 bottom-0 p-1"></div>
</div>
</div>
                    <div class="ms-3" >
                        <h6 class="mb-0 text-white">Indianeduhub</h6>
                        <span style="color: rgb(209, 211, 212);">Mentors</span>
                    </div>
                </div>
                <div class="navbar-nav w-100" style="background-color: #232f65;">
                    <a href="/mentor-dashboard" class="nav-item nav-link text-white "><i class="fa fa-tachometer-alt me-2 text-dark"></i>Dashboard</a>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle active" data-bs-toggle="dropdown"><i class="fa fa-laptop me-2"></i>SE Form</a>
                        <div class="dropdown-menu bg-transparent border-0">
                            <a href="/mentor-form-details" class="dropdown-item active">Se-form-details</a>
                            <a href="typography.html" class="dropdown-item"></a>
                            <a href="element.html" class="dropdown-item"></a>
                        </div>
                    </div>
                           
                </div>
            </nav>
        </div>
        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <nav class="navbar navbar-expand bg-light navbar-light sticky-top px-4 py-0">
                <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
                    <h2 class="text-primary mb-0"><img src="/img/ie.png" alt="Indian Edu Hub Logo" style="height: 30px;"></h2>
                </a>
                <a href="#" class="sidebar-toggler flex-shrink-0">
                    <i class="fa fa-bars"></i>
                </a>
                <form class="d-none d-md-flex ms-4">
                    <input class="form-control border-0" type="search" placeholder="Search">
                </form>
                <div class="navbar-nav align-items-center ms-auto">
                    
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="fa fa-bell me-lg-2"></i>
                            <span class="d-none d-lg-inline-flex">Notificatin</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
                            <a href="#" class="dropdown-item">
                                <h6 class="fw-normal mb-0">Profile updated</h6>
                                <small>15 minutes ago</small>
                            </a>
                       
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item text-center">See all notifications</a>
                        </div>
                    </div>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img class="rounded-circle me-lg-2" src="/images/WhatsApp Image 2024-07-26 at 17.51.27_ac46e3bb.jpg" alt="" style="width: 40px; height: 40px;">
                            <span class="d-none d-lg-inline-flex">Seyed Shahid</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
                            <a href="#" class="dropdown-item">Log Out</a>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- Navbar End -->


<!-- Table Start -->
<div class="container-fluid pt-4 px-4">
    <div class="row g-4">
        <div class="col-12">
            <div class="bg-light rounded h-100 p-4">
                <h6 class="mb-4">Mentor Details</h6>
                <div class="table-responsive">
 <div class="table-wrapper ">
    <table class="table" id="dataTable">
                        <thead>
                            <tr>
                                <th>No.</th>
                                 <th >Date</th>
                                <th>Student ID</th>
                                <th>ref</th>
                                <th>Mentor</th>
                                <th>Name of Student</th>
                                <th>Course</th>
                                <th>Specialization</th>
                                <th>Email</th>
                                <th>Mobile Number</th>
                                <th>Role</th>
                                <th>Counselor Name</th>
                                <th>Service Pack</th>
                                <th>Intake</th>
                                <th>Mentorship</th>
                                <th>Select University</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each formData}}
                            <tr data-id="{{_id}}">
                                <td>{{incrementIndex @index}}</td>
                                  <td class="text-danger">{{this.date}}</td>
  <td>{{this.studentid}}</td>
    <td class="text-success font-weight-bold">{{this.referredBy}}</td>
                              <td>
                                    <select class="form-select" style="width: 110px;">
                                        <option value="" {{#if (eq this.mentor "")}}selected{{/if}}>Select Mentor</option>
                                        <option value="Sayed Shahid" {{#if (eq this.mentor "Sayed Shahid")}}selected{{/if}}>Sayed Shahid</option>
                                        <option value="Liya" {{#if (eq this.mentor "Liya")}}selected{{/if}}>Liya</option>
                                        <option value="Anas" {{#if (eq this.mentor "Anas")}}selected{{/if}}>Anas</option>
                                        <option value="Jawhar" {{#if (eq this.mentor "Jawhar")}}selected{{/if}}>Jawhar</option>
                                    </select>
                                </td>
                                <td>{{this.name}}</td>
                                <td><input type="text" class="form-control" value="{{this.course}}" /></td>
                                <td><input type="text" class="form-control" value="{{this.specialization}}" /></td>
                                <td>{{this.email}}</td>
                                <td>{{this.mobile}}</td>
                                <td>{{this.role}}</td>
                                <td>{{this.specificName}}</td>
                                <td>{{this.servicePack}}</td>
                                <td>
                                    <select class="form-select" style="width: 110px;">
                                        <option value="" {{#if (eq this.intake "")}}selected{{/if}}>None</option>
                                        <option value="Next Week" {{#if (eq this.intake "Next Week")}}selected{{/if}}>Next Week</option>
                                        <option value="This Week" {{#if (eq this.intake "This Week")}}selected{{/if}}>This Week</option>
                                        <option value="Month End" {{#if (eq this.intake "Month End")}}selected{{/if}}>Month End</option>
                                        <option value="Next Intake" {{#if (eq this.intake "Next Intake")}}selected{{/if}}>Next Intake</option>
                                    </select>
                                </td>
                                <td>
                                    <button class="btn btn-status {{#if (eq this.mentorshipStatus 'Done')}}btn-done{{else}}btn-not-done{{/if}}" onclick="toggleStatus(this, 'Mentorship')">
                                        {{#if (eq this.mentorshipStatus 'Done')}}Done{{else}}Not Done{{/if}}
                                    </button>
                                </td>
                                <td>
                                    <select class="form-select">
                                        <option value="" {{#if (eq this.university "")}}selected{{/if}}>Select University</option>
                                        <option value="Manipal Jaipur University" {{#if (eq this.university "Manipal Jaipur University")}}selected{{/if}}>Manipal Jaipur University</option>
                                        <option value="Manipal Sikkim University" {{#if (eq this.university "Manipal Sikkim University")}}selected{{/if}}>Manipal Sikkim University</option>
                                        <option value="Jain Online University" {{#if (eq this.university "Jain Online University")}}selected{{/if}}>Jain Online University</option>
                                        <option value="Jain ODL University" {{#if (eq this.university "Jain ODL University")}}selected{{/if}}>Jain ODL University</option>
                                        <option value="Vignan University" {{#if (eq this.university "Vignan University")}}selected{{/if}}>Vignan University</option>
                                        <option value="Amity University" {{#if (eq this.university "Amity University")}}selected{{/if}}>Amity University</option>
                                        <option value="SVSU" {{#if (eq this.university "SVSU")}}selected{{/if}}>SVSU</option>
                                        <option value="Aligarh Muslim University Online" {{#if (eq this.university "Aligarh Muslim University Online")}}selected{{/if}}>Aligarh Muslim University Online</option>
                                        <option value="KLU Online" {{#if (eq this.university "KLU Online")}}selected{{/if}}>KLU Online</option>
                                        <option value="Mizoram University" {{#if (eq this.university "Mizoram University")}}selected{{/if}}>Mizoram University</option>
                                        <option value="Jamia Hamdard University" {{#if (eq this.university "Jamia Hamdard University")}}selected{{/if}}>Jamia Hamdard University</option>
                                        <option value="Uttaranchal University" {{#if (eq this.university "Uttaranchal University")}}selected{{/if}}>Uttaranchal University</option>
                                        <option value="Andhra University" {{#if (eq this.university "Andhra University")}}selected{{/if}}>Andhra University</option>
                                        <option value="LPU" {{#if (eq this.university "LPU")}}selected{{/if}}>LPU</option>
                                    </select>
                                </td>
<td>
    <button class="btn btn-status {{#if (eq assign 'client')}}btn-paid{{else}}btn-not-paid{{/if}}" 
            onclick="toggleAssignment(this)">
        {{#if (eq assign 'client')}}Assigned to client department{{else}}Assign to client department{{/if}}
    </button>
</td>


                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
             </div>
        </div>
    </div>
</div>
<!-- Table End -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
$(document).ready(function() {
   const table = $('#dataTable').DataTable({
        pageLength: 100, // Default to showing 100 entries
        lengthMenu: [[100, 25, 10, -1], [100, 25, 10, "All"]] // Options for 100, 25, 10, and All entries per page
    });

    // Change header background on scroll
    $(window).scroll(function() {
        if ($(this).scrollTop() > 50) {
            $('header').addClass('scrolled');
        } else {
            $('header').removeClass('scrolled');
        }
    });
});

function toggleStatus(button, type) {
    const currentText = button.innerText.trim();
    const statusConfig = {
        'Not Done': { text: 'Done', newClass: 'btn-done', oldClass: 'btn-not-done' },
        'Done': { text: 'Not Done', newClass: 'btn-not-done', oldClass: 'btn-done' }
    };

    const newStatus = statusConfig[currentText];
    if (newStatus) {
        $(button).text(newStatus.text)
            .removeClass(newStatus.oldClass)
            .addClass(newStatus.newClass);
    }
}

function toggleAssignment(button) {
    const currentText = $(button).text().trim();
    const isAssigned = currentText === 'Assigned to client department';

    const newText = isAssigned ? 'removing From client department' : 'Assign to client department';
    const newAssignValue = isAssigned ? 'null' : 'client';

    Swal.fire({
        title: 'Are you sure?',
        text: `You are about to ${newText.toLowerCase()}.`,
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, proceed!',
        cancelButtonText: 'No, cancel'
    }).then((result) => {
        if (result.isConfirmed) {
            $(button).text(newText)
                .toggleClass('btn-paid', !isAssigned)
                .toggleClass('btn-not-paid', isAssigned)
                .css('background-color', isAssigned ? 'red' : '');

            const row = $(button).closest('tr');
            const clientId = row.data('id');

            const mentor = row.find('select.form-select').eq(0).val();
            const course = row.find('input.form-control').eq(0).val();
            const specialization = row.find('input.form-control').eq(1).val();
            const intake = row.find('select.form-select').eq(1).val();
            const mentorshipStatus = row.find('.btn-status').eq(0).text().trim();
            const university = row.find('select.form-select').eq(2).val();

            const data = {
                id: clientId,
                mentor: mentor,
                course: course,
                specialization: specialization,
                intake: intake,
                mentorshipStatus: mentorshipStatus,
                university: university,
                assign: newAssignValue
            };

            // Send data to the server
            fetch('/update-client-details', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    Swal.fire('Success', data.message, 'success');
                } else {
                    Swal.fire('Error', data.message, 'error');
                }
            })
            .catch(error => {
                console.error('Error updating details:', error);
                Swal.fire('Error', 'An error occurred while updating details.', 'error');
            });
        }
    });
}



</script>



 
  <!-- Additional JavaScript Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="lib/chart/chart.min.js"></script>
  <script src="lib/easing/easing.min.js"></script>
  <script src="lib/waypoints/waypoints.min.js"></script>
  <script src="lib/owlcarousel/owl.carousel.min.js"></script>
  <script src="lib/tempusdominus/js/moment.min.js"></script>
  <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
  <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

  <!-- Template Javascript -->
  <script src="js/main.js"></script>
</body>
</html>