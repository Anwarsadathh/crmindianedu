<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Mentor Dashboard</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
 <!-- Add necessary meta tags and links to CSS/JS files -->
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
  <!-- Bootstrap JS -->
  <!-- DataTables JS -->
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
     <style>
body {
    font-family: 'Montserrat', sans-serif;
    background-color: #f0f2f5;
    margin: 0;
    padding: 0;
    font-size: 14px; /* Smaller font size for overall content */
}

header {
    width: 100%;
    display: flex;
    align-items: center;
    padding: 15px;
    background-color: #f8f9fa;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1000;
}

header img {
    height: 35px;
    margin-left: 15px;
}

.dashboard-container {
    margin-top: 80px; /* Space for fixed header */
    width: 90%;
    max-width: 1200px;
    background-color: #ffffff;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    transition: box-shadow 0.3s ease, transform 0.3s ease;
}

.dashboard-container:hover {
    transform: scale(1.02);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
}

.btn-custom {
    background-color: #007BFF;
    color: #fff;
    border-radius: 5px;
    font-size: 14px;
    transition: background-color 0.3s ease, transform 0.3s ease;
}

.btn-custom:hover {
    background-color: #0056b3;
    transform: scale(1.05);
}


//
.table-responsive {
    margin-top: 20px;
}

.table {
    width: 100%;
    border-collapse: collapse;
}

.table thead th {
    background-color: #232f65;
    border-bottom: 2px solid #dee2e6;
    color: #ffffff;
    text-align: left;
    padding: 10px;
    width: auto !important;
    font-size: 12px; /* Smaller font size for table headers */
}

.table tbody td {
    border-bottom: 1px solid #dee2e6;
    padding: 8px;
    font-size: 12px; /* Smaller font size for table content */
}

/* Button styles */
.btn-status {
    font-size: 12px;
    padding: 5px 10px;
    transition: background-color 0.3s ease;
}

.btn-not-paid {
    background-color: #e8172c; /* Red */
    color: #fff;
}

.btn-paid {
    background-color: #28a745; /* Green */
    color: #fff;
}

.btn-not-approved {
    background-color: #ffc107; /* Yellow */
    color: #000;
}

.btn-approved {
    background-color: #17a2b8; /* Teal */
    color: #fff;
}

.btn-not-done {
    background-color: #ffc107; /* Yellow */
    color: #000;
}

.btn-done {
    background-color: #28a745; /* Green */
    color: #fff;
}

.btn-status.active-paid {
    background-color: #28a745 !important; /* Green */
    color: #fff;
}

.btn-status.active-not-paid {
    background-color: #dc3545 !important; /* Red */
    color: #fff;
}

.btn-status.active-not-approved {
    background-color: #ffc107 !important; /* Yellow */
    color: #000;
}

.btn-status.active-approved {
    background-color: #17a2b8 !important; /* Teal */
    color: #fff;
}

.btn-status.active-not-done {
    background-color: #ffc107 !important; /* Yellow */
    color: #000;
}

.btn-status.active-done {
    background-color: #28a745 !important; /* Green */
    color: #fff;
}



.image-stack {
    position: relative;
    display: flex;
}

.profile-img {
    border-radius: 50%;
    position: relative;
    z-index: 1;
    margin-left: -20px; /* Adjust based on the desired overlap */
    transition: transform 0.3s, z-index 0.3s;
}

.profile-img:hover {
    transform: translateX(-20px); /* Adjust based on the desired hover effect */
    z-index: 10;
}

.image-stack .bg-success {
    position: absolute;
    bottom: 0;
    right: 0;
    border-radius: 50%;
    border: 2px solid white;
    padding: 1px;
}

/* Custom styles for DataTables */
.dataTables_wrapper .dataTables_filter {
    float: right;
    text-align: right;
    margin-bottom: 10px; /* Add margin below the search bar */
}

.dataTables_wrapper .dataTables_filter input {
    margin-left: 0.5em;
    display: inline-block;
    width: auto;
    margin-bottom: 10px; /* Add margin below the search bar */
}

.dataTables_wrapper .dataTables_length {
    float: left;
    margin-bottom: 10px; /* Add margin below the length dropdown */
}

.dataTables_wrapper .dataTables_info {
    float: left;
    margin-top: 10px; /* Add margin above the info text */
}

.dataTables_wrapper .dataTables_paginate {
    float: right;
    margin-top: 10px; /* Add margin above the pagination controls */
}
.required-field {
    border: 2px solid red;
}

input, select {
    padding: 10px;
    border: none;
    border-radius: 5px;
    box-sizing: border-box;
    background-color: #eeeeee;
    color: #000000;
    transition: background-color 0.3s, transform 0.3s, width 0.3s;
}

input:focus, select:focus {
    background-color: #ffffff;
    transform: scale(1.05);
    width: 180%; /* Adjust the percentage as needed */
}
.form-control{
    width: 100px;
}
.form-select{
    width: 100px;
}
    </style>
</head>

<body>
    <div class="container-xxl position-relative bg-white d-flex p-0" style="background-color: #232f65;">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Sidebar Start -->
        <div class="sidebar pe-4 pb-3" style="background-color: #232f65;">
            <nav class="navbar " style="background-color: #232f65;">
                <a href="index.html" class="navbar-brand mx-4 mb-3">
                    <h3 class="text-primary"> <img src="/images/indian-hub-logo-vert-white-e1662813826792.png" alt="Indian Edu Hub Logo" class="log"></h3>
                </a>
                <div class="d-flex align-items-center ms-4 mb-4" style="background-color: #232f65;">
                      
                    <div class="ms-3" >
                        <h6 class="mb-0 text-white">Indianeduhub</h6>
                        <span style="color: rgb(209, 211, 212);">Accounts</span>
                    </div>
                </div>
                <div class="navbar-nav w-100" style="background-color: #232f65;">
                    <a href="/accounts-dashboard" class="nav-item nav-link text-white "><i class="fa fa-tachometer-alt me-2 text-dark"></i>Dashboard</a>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle active" data-bs-toggle="dropdown"><i class="fa fa-laptop me-2"></i>SE Form</a>
                        <div class="dropdown-menu bg-transparent border-0">
                            <a href="/accounts-details" class="dropdown-item active">Se-form-details</a>
                            <a href="typography.html" class="dropdown-item"></a>
                            <a href="element.html" class="dropdown-item"></a>
                        </div>
                    </div>
                    
                </div>
            </nav>
        </div>
        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <nav class="navbar navbar-expand bg-light navbar-light sticky-top px-4 py-0">
                <a href="index.html" class="navbar-brand d-flex d-lg-none me-4">
                    <h2 class="text-primary mb-0"><img src="/img/ie.png" alt="Indian Edu Hub Logo" style="height: 30px;"></h2>
                </a>
                <a href="#" class="sidebar-toggler flex-shrink-0">
                    <i class="fa fa-bars"></i>
                </a>
                <form class="d-none d-md-flex ms-4">
                    <input class="form-control border-0" type="search" placeholder="Search">
                </form>
                <div class="navbar-nav align-items-center ms-auto">
                    
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="fa fa-bell me-lg-2"></i>
                            <span class="d-none d-lg-inline-flex">Notificatin</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
                            <a href="#" class="dropdown-item">
                                <h6 class="fw-normal mb-0">Profile updated</h6>
                                <small>15 minutes ago</small>
                            </a>
                       
                            <hr class="dropdown-divider">
                            <a href="#" class="dropdown-item text-center">See all notifications</a>
                        </div>
                    </div>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <img class="rounded-circle me-lg-2" src="/images/anon.webp" alt="" style="width: 40px; height: 40px;">
                            <span class="d-none d-lg-inline-flex">Client</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end bg-light border-0 rounded-0 rounded-bottom m-0">
                            <a href="#" class="dropdown-item">Log Out</a>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- Navbar End -->
<!-- Table Start -->
<div class="container-fluid pt-4 px-4">
    <div class="row g-4">
        <div class="col-12">
            <div class="bg-light rounded h-100 p-4">
                <h6 class="mb-4">Mentor Details</h6>
                <div class="table-responsive">
                    <table class="table" id="dataTable">
                        <thead>
                            <tr>
                                <th>No.</th>
                                <th>Date</th>
                                <th>Student ID</th>
                                <th>Mentor</th>
                                <th>Student Name</th>
                                <th>Course</th>
                                <th>Specialization</th>
                                <th>Email</th>
                                <th>Mobile Number</th>
                                <th>Role</th>
                                <th>Specific Name</th>
                                <th>Service Pack</th>
                                <th>Intake</th>
                                <th>Uni Selected</th>
                                <th>Mentorship</th>
                                <th>Uni Paid</th>
                                <th>Uni Fee Paid Date</th>
                                <th>Document Status</th>
                                <th>Uni Refund Initiated</th>
                                <th>Date of Uni Refund Initiated</th>
                                <th>IEH Refund Initiated</th>
                                <th>Date of IEH Refund Initiated</th>
                                <th>Fee Paid</th>
                                <th>Amount</th>
                                <th>Semester Status</th>
                                <th>Batch</th>
                                <th>Enrollment No</th>
                                <th>ID Approved</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each formData}}
                            <tr data-id="{{_id}}">
                                <td>{{incrementIndex @index}}</td>
                                <td class="text-danger">{{this.date}}</td>
                                <td>{{this.studentid}}</td>
                                <td>{{this.mentor}}</td>
                                <td>{{this.name}}</td>
                                <td>{{this.course}}</td>
                                <td>{{this.specialization}}</td>
                                <td>{{this.email}}</td>
                                <td>{{this.mobile}}</td>
                                <td>{{this.role}}</td>
                                <td>{{this.specificName}}</td>
                                <td>{{this.servicePack}}</td>
                                <td>
                                    <select class="form-select" style="width: 110px;">
                                        <option value="" {{#if (eq this.intake "")}}selected{{/if}}>None</option>
                                        <option value="Next Week" {{#if (eq this.intake "Next Week")}}selected{{/if}}>Next Week</option>
                                        <option value="This Week" {{#if (eq this.intake "This Week")}}selected{{/if}}>This Week</option>
                                        <option value="Month End" {{#if (eq this.intake "Month End")}}selected{{/if}}>Month End</option>
                                        <option value="Next Intake" {{#if (eq this.intake "Next Intake")}}selected{{/if}}>Next Intake</option>
                                    </select>
                                </td>
                                <td>{{this.university}}</td>
                                <td>
                                    <button class="btn btn-status {{#if (eq this.mentorshipStatus "Done")}}btn-done{{else}}btn-not-done{{/if}}" onclick="toggleStatus(this, 'Mentorship')">
                                        {{#if (eq this.mentorshipStatus "Done")}}Done{{else}}Not Done{{/if}}
                                    </button>
                                </td>
                                <td>
                                    <button class="btn btn-status {{#if (eq this.universityPaid "Paid")}}btn-paid{{else}}btn-not-paid{{/if}}" onclick="toggleStatus(this, 'University Paid')">
                                        {{#if (eq this.universityPaid "Paid")}}Paid{{else}}Not Paid{{/if}}
                                    </button>
                                </td>
                                <td><input type="date" class="form-control" value="{{this.universityPaidDate}}" /></td>
                                <td>
                                    <button class="btn btn-status {{#if (eq this.documentStatus "Approved")}}btn-approved{{else}}btn-not-approved{{/if}}" onclick="toggleStatus(this, 'Document Status')">
                                        {{#if (eq this.documentStatus "Approved")}}Approved{{else}}Not Approved{{/if}}
                                    </button>
                                </td>
                                <td>
                                    <select class="form-select">
                                        <option value="" {{#if (eq this.unirefundinitiated "")}}selected{{/if}}>Select</option>
                                        <option value="initiated" {{#if (eq this.unirefundinitiated "initiated")}}selected{{/if}}>Initiated</option>
                                        <option value="success" {{#if (eq this.unirefundinitiated "success")}}selected{{/if}}>Success</option>
                                    </select>
                                </td>
                                <td class="refund-cell">
                                    <input type="date" class="form-control {{#unless (eq this.unirefundinitiated "success")}}d-none{{/unless}}" value="{{this.dateOfRefundInitiateduni}}" />
                                </td>
                                <td>
                                    <select class="form-select">
                                        <option value="" {{#if (eq this.iehrefundinitiated "")}}selected{{/if}}>Select</option>
                                        <option value="initiated" {{#if (eq this.iehrefundinitiated "initiated")}}selected{{/if}}>Initiated</option>
                                        <option value="success" {{#if (eq this.iehrefundinitiated "success")}}selected{{/if}}>Success</option>
                                    </select>
                                </td>
                                <td class="refund-cell">
                                    <input type="date" class="form-control {{#unless (eq this.iehrefundinitiated "success")}}d-none{{/unless}}" value="{{this.dateOfRefundInitiatedieh}}" />
                                </td>
                                <td>
                                    <select class="form-select">
                                        <option value="" {{#if (eq this.feepaid "")}}selected{{/if}}>Select</option>
                                        <option value="Semester" {{#if (eq this.feepaid "Semester")}}selected{{/if}}>Semester</option>
                                        <option value="First Year" {{#if (eq this.feepaid "First Year")}}selected{{/if}}>First Year</option>
                                        <option value="Full Fee" {{#if (eq this.feepaid "Full Fee")}}selected{{/if}}>Full Fee</option>
                                    </select>
                                </td>
                                <td><input type="number" class="form-control" value="{{this.feePaidAmount}}" /></td>
                                <td>
                                    <select class="form-select">
                                        <option value="" {{#if (eq this.semesterStatus "")}}selected{{/if}}>Select</option>
                                        <option value="Semester 1" {{#if (eq this.semesterStatus "Semester 1")}}selected{{/if}}>Semester 1</option>
                                        <option value="Semester 2" {{#if (eq this.semesterStatus "Semester 2")}}selected{{/if}}>Semester 2</option>
                                        <option value="Semester 3" {{#if (eq this.semesterStatus "Semester 3")}}selected{{/if}}>Semester 3</option>
                                        <option value="Semester 4" {{#if (eq this.semesterStatus "Semester 4")}}selected{{/if}}>Semester 4</option>
                                        <option value="Semester 5" {{#if (eq this.semesterStatus "Semester 5")}}selected{{/if}}>Semester 5</option>
                                        <option value="Semester 6" {{#if (eq this.semesterStatus "Semester 6")}}selected{{/if}}>Semester 6</option>
                                        <option value="Drop out" {{#if (eq this.semesterStatus "Drop out")}}selected{{/if}} class="text-danger">Drop out</option>
                                        <option value="Course completed" {{#if (eq this.semesterStatus "Course completed")}}selected{{/if}} class="text-success">Course completed</option>
                                    </select>
                                </td>
                                <td>
                                    <select class="form-select">
                                        <option value="" {{#if (or (eq this.batch "") (eq this.batch null))}}selected{{/if}}>None</option>
                                        <option value="JAN BATCH" {{#if (eq this.batch "JAN BATCH")}}selected{{/if}}>JAN BATCH</option>
                                        <option value="JULY BATCH" {{#if (eq this.batch "JULY BATCH")}}selected{{/if}}>JULY BATCH</option>
                                    </select>
                                </td>
                                <td><input type="text" class="form-control" value="{{this.enrollmentNo}}" /></td>
                                
                                <td>
                                    <button class="btn btn-status {{#if (eq this.idApproved "Approved")}}btn-approved{{else}}btn-not-approved{{/if}}" onclick="toggleStatus(this, 'ID Approved')">
                                        {{#if (eq this.idApproved "Approved")}}Approved{{else}}Not Approved{{/if}}
                                    </button>
                                </td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Table End -->


<!-- Include SweetAlert2 for alerts -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
$(document).ready(function() {
    // Initialize DataTable
    $('#dataTable').DataTable();

    // Change header background on scroll
    $(window).scroll(function() {
        $('header').toggleClass('scrolled', $(this).scrollTop() > 50);
    });

    // Show/Hide date inputs based on refund initiated status
    $('#dataTable').on('change', 'select', function() {
        const row = $(this).closest('tr');
        toggleDateVisibility(row);
    }).trigger('change'); // Trigger change event on page load to set initial visibility
});

function toggleDateVisibility(row) {
    // Get refund statuses from the row
    const status = {
        unirefund: row.find('td').eq(18).find('select').val(),
        iehrefund: row.find('td').eq(20).find('select').val()
    };

    // Show/Hide date inputs based on refund statuses
    const uniDateInput = row.find('td').eq(19).find('input');
    const iehDateInput = row.find('td').eq(21).find('input');

    uniDateInput.toggleClass('d-none', status.unirefund !== 'success');
    iehDateInput.toggleClass('d-none', status.iehrefund !== 'success');

    // Add required attribute if the status is 'success'
    uniDateInput.prop('required', status.unirefund === 'success');
    iehDateInput.prop('required', status.iehrefund === 'success');
}

function toggleStatus(button, type) {
    const currentText = $(button).text().trim();
    const statusConfig = {
        'Not Paid': { text: 'Paid', newClass: 'btn-paid' },
        'Paid': { text: 'Not Paid', newClass: 'btn-not-paid' },
        'Not Approved': { text: 'Approved', newClass: 'btn-approved' },
        'Approved': { text: 'Not Approved', newClass: 'btn-not-approved' },
        'Not Done': { text: 'Done', newClass: 'btn-done' },
        'Done': { text: 'Not Done', newClass: 'btn-not-done' }
    };

    const newStatus = statusConfig[currentText];
    if (newStatus) {
        $(button).text(newStatus.text)
            .removeClass('btn-not-paid btn-paid btn-not-approved btn-approved btn-not-done btn-done')
            .addClass(newStatus.newClass);

        const row = $(button).closest('tr');
        const rowData = getRowData(row);

        if (type === 'ID Approved') {
            handleIdApproval(row, rowData);
        }
    }
}

function getRowData(row) {
    return {
        id: row.data('id'),
        date: row.find('td').eq(1).text().trim(),
        studentid: row.find('td').eq(2).text().trim(),
        mentor: row.find('td').eq(3).text().trim(),
        name: row.find('td').eq(4).text().trim(),
        course: row.find('td').eq(5).text().trim(),
        specialization: row.find('td').eq(6).text().trim(),
        email: row.find('td').eq(7).text().trim(),
        mobile: row.find('td').eq(8).text().trim(),
        role: row.find('td').eq(9).text().trim(),
        specificName: row.find('td').eq(10).text().trim(),
        servicePack: row.find('td').eq(11).text().trim(),
        intake: row.find('td').eq(12).find('select').val() || '',
        university: row.find('td').eq(13).text().trim(),
        mentorshipStatus: row.find('td').eq(14).find('button').text().trim(),
        universityPaid: row.find('td').eq(15).find('button').text().trim(),
        universityPaidDate: row.find('td').eq(16).find('input').val() || '',
        documentStatus: row.find('td').eq(17).find('button').text().trim(),
        unirefundinitiated: row.find('td').eq(18).find('select').val() || '',
        dateOfRefundInitiateduni: row.find('td').eq(19).find('input').val() || '',
        iehrefundinitiated: row.find('td').eq(20).find('select').val() || '',
        dateOfRefundInitiatedieh: row.find('td').eq(21).find('input').val() || '',
        feepaid: row.find('td').eq(22).find('select').val() || '',
        feePaidAmount: row.find('td').eq(23).find('input').val() || '',
        semesterStatus: row.find('td').eq(24).find('select').val() || '',
        batch: row.find('td').eq(25).find('select').val() || '',
        enrollmentNo: row.find('td').eq(26).find('input').val() || '',
        idApproved: row.find('td').eq(27).find('button').text().trim()
    };
}

function handleIdApproval(row, rowData) {
    Swal.fire({
        title: 'Are you sure?',
        text: 'Do you want to approve this ID?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, approve it!',
        cancelButtonText: 'Cancel'
    }).then((result) => {
        if (result.isConfirmed) {
            const missingFields = validateFields(rowData);
            console.log('Row Data:', rowData); // Log row data
            console.log('Missing Fields:', missingFields); // Log missing fields

            if (missingFields.length) {
                Swal.fire({
                    title: 'Error!',
                    text: 'Please fill in all required fields before approving ID. Missing fields: ' + missingFields.join(', '),
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
                return;
            }

            $.post('/update-client-details', rowData)
                .done(() => {
                    Swal.fire({
                        title: 'Success!',
                        text: 'ID has been approved successfully.',
                        icon: 'success',
                        confirmButtonText: 'OK'
                    });
                })
                .fail(() => {
                    Swal.fire({
                        title: 'Error!',
                        text: 'Update failed. Please try again.',
                        icon: 'error',
                        confirmButtonText: 'OK'
                    });
                });
        }
    });
}

function validateFields(rowData) {
    const requiredFields = [
        { name: 'Student Name', field: rowData.name },
        { name: 'Course', field: rowData.course },
        { name: 'Specialization', field: rowData.specialization },
        { name: 'Email', field: rowData.email },
        { name: 'Mobile Number', field: rowData.mobile },
        { name: 'Role', field: rowData.role },
        { name: 'Specific Name', field: rowData.specificName },
        { name: 'Service Pack', field: rowData.servicePack },
        { name: 'Intake', field: rowData.intake },
        { name: 'University', field: rowData.university },
        { name: 'Semester Status', field: rowData.semesterStatus },
        { name: 'Mentorship Status', field: rowData.mentorshipStatus },
        { name: 'University Paid', field: rowData.universityPaid },
        { name: 'University Paid Date', field: rowData.universityPaidDate },
        { name: 'Document Status', field: rowData.documentStatus },
        { name: 'Batch', field: rowData.batch },
        { name: 'Enrollment No', field: rowData.enrollmentNo },
        { name: 'Student ID', field: rowData.studentid },
        { name: 'Date', field: rowData.date },
        { name: 'Mentor', field: rowData.mentor },
        { name: 'Fee Paid', field: rowData.feepaid },
        { name: 'Fee Paid Amount', field: rowData.feePaidAmount }
    ];

    // Include the new required fields if the status is 'success'
    if (rowData.unirefundinitiated === 'success') {
        requiredFields.push({ name: 'Date of Refund Initiated (Uni)', field: rowData.dateOfRefundInitiateduni });
    }
    if (rowData.iehrefundinitiated === 'success') {
        requiredFields.push({ name: 'Date of Refund Initiated (IEH)', field: rowData.dateOfRefundInitiatedieh });
    }

    return requiredFields.filter(field => !field.field || field.field.trim() === '').map(field => field.name);
}
</script>


 
  <!-- Additional JavaScript Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="lib/chart/chart.min.js"></script>
  <script src="lib/easing/easing.min.js"></script>
  <script src="lib/waypoints/waypoints.min.js"></script>
  <script src="lib/owlcarousel/owl.carousel.min.js"></script>
  <script src="lib/tempusdominus/js/moment.min.js"></script>
  <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
  <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

  <!-- Template Javascript -->
  <script src="js/main.js"></script>
</body>
</html>